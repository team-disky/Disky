<%= render partial: "layouts/manager_header" %>

<div class="container">
	<div class="row">
		<h1 class="new">商品登録</h1><h4 class="caution"> &#x203B;は必須項目です</h4>
			<%= form_for(@product, url: manager_products_path) do |f| %>
				<% if @product.errors.any? %>
   				<% @product.errors.full_messages.each do |message| %>
        			<li><%= message %></li>
      			<% end %>
     			<% end %>

     		<table class="table">
     			<tbody>
				<tr>
					<th class="col-sm-3"><%= f.label "商品名" %><strong>&#x203B;</strong></th>
					<td class="col-sm-10" colspan="2"><%= f.text_field :title, class:"product_title" %><td>
				</tr>
				<tr>
					<th><%= f.label "商品画像" %></th>
					<td colspan="2"><%= f.attachment_field :image %></td>
				</tr>
				<tr>
					<th><%= f.label "アーティスト名" %><strong>&#x203B;</strong></th>
					<td colspan="2"><%= f.collection_select :artist_id, Artist.all, :id, :name %></td>
				</tr>
				<tr>
					<th><%= f.label "レーベル名" %><strong>&#x203B;</strong></th>
					<td colspan="2"><%= f.collection_select :record_label_id, RecordLabel.all, :id, :name %></td>
				</tr>
				<tr>
					<th><%= f.label "ジャンル" %><strong>&#x203B;</strong></th>
					<td colspan="2"><%= f.collection_select :category_id, Category.all, :id, :name %></td>
				</tr>
				<tr>
					<th><%= f.label "フォーマット" %><strong>&#x203B;</strong></th>
					<td colspan="2"><%= f.select :format, [["シングル","シングル"],["アルバム","アルバム"],["マキシシングル","マキシシングル"],["複数アルバム","複数アルバム"],["ミニアルバム","ミニアルバム"]] %></td>
				</tr>
				<tr>
					<th><%= f.label "発売日" %><strong>&#x203B;</strong></th>
					<td colspan="2"><%= f.date_select :sales_date %></td>
				</tr>
				<tr>
					<th>収録内容<strong>&#x203B;</strong></th>
					<td><%= f.add_nested_fields_link :discs, 'ディスクを追加', class:"btn btn-success" %>
							<%= f.nested_fields_for :discs do |q| %>
							<%= q.label "ディスク番号" %><strong>&#x203B;</strong>
							<%= q.number_field :number, min:1 %>
							<%= q.remove_nested_fields_link 'ディスクを削除', class:"btn btn-danger" %>
								<%= q.nested_fields_for :songs do |s| %>
									<%= s.label "曲順" %><strong>&#x203B;</strong>
									<%= s.number_field :number, min:1 %>
									<%= s.label "曲名" %><strong>&#x203B;</strong>
									<%= s.text_field :title, class:"song_title" %>
									<%= s.label "収録時間" %><strong>&#x203B;</strong>
									<%= s.text_field :recording_time_minutes, class:"recording_time" %>分
									<%= s.text_field :recording_time_seconds, class:"recording_time" %>秒
								<%= s.remove_nested_fields_link '曲を削除', class:"btn btn-danger" %>
								<% end %>
								<%= q.add_nested_fields_link :songs, '曲を追加', class:"btn btn-info" %>
						<% end %>
					</td>
				</tr>
				<tr>
					<th><%= f.label "価格(税抜)" %><strong>&#x203B;</strong></th>
					<td colspan="2"><%= f.text_field :price, class:"product_price" %>円</td>
				</tr>
				<tr>
					<th><%= f.label "商品ステータス" %><strong>&#x203B;</strong></th>
					<td colspan="2"><%= f.select :status, [["販売中","販売中"],["販売停止中","販売停止中"]] %></td>
				</tr>
				</tbody>
			</table>
			<div class="action-row">
				<div class="col-sm-4"></div>
				<%= link_to manager_products_path do %>
					<button class="col-sm-2 btn btn-warning">キャンセル</button>
				<% end %>
				<div class="col-sm-1"></div>
				<%= f.submit "登録", class:"col-sm-2 btn btn-primary" %>
			</div>
			<% end %>

	</div>
</div>